#### Три типа Задач ЗУП

релиз ЗУП 3.1.23.20

##### Задачи Учета времени


###### Постановка

- Хим. лаборатория
    - Оплата по Оклду, пропорционально отработанным часам
        - Должность             | Оклад 
        - Лаборант              | 60 000 ₽  
        - Научный сотрудник     | 80 000 ₽ 
    - Бокс для работы с опасными  материалами:
        - Надбавки:
            - За Вредность за каждый час работы (определяется при приеме на работу)
            - За Стаж работы (зависит от количества накопленных часов на Начало месяца - **за все время работы** )
                - до 10 часов:  + 20 % Оклада
                - от 10 часов до 100 часов:  + 40 % Оклада
                - свыше  100 часов:  + 60 % Оклада    
        - Время Входа / Выхода фиксируется, в конце месяца передается в бухгалтерию Отчетом
            -  Сотрудник | Дата | время Входа | время Выхода  
- Необходимо:
    - создать Документ для ввода отчета о посещениях Бокса
    - Реализовать автоматизированное начисление Надбавок за Вредность        

###### Реализация

- Добавленные Объекты
    - Подсистема: `УчетВремени`
        - Состав: 
            - Документ `ОтчетОПосещенияхБокса`
     - Документ `ОтчетОПосещенияхБокса`
        - Реквизиты: 
            - Шапка:
                - Организация → СправочникСсылка.Организации
                - Вид Времени → СправочникСсылка.ВидыИспользованияРабочегоВремени
            - ТЧ (`ОтчетОВремени`):
                - Сотрудник → СправочникСсылка.Сотрудники
                - Дата →  Дата(Дата)
                - Время Входа  →  Дата (Время)
                - Время Выхода  →  Дата  (Время)
        - Движения Документа
            - РН `РегистрНакопления.ДанныеОперативногоУчетаРабочегоВремениСотрудников`
        - Модуль Объекта
            - Обработка Проведения:
                - готовим наборы Записей для Регистрации Движений 
- [Реализация](https://github.com/alex-dev-2020/HRM_3_1_23/commit/e9937c0c7292463a5358433d78de8df9b189fa0c)  для варианта № 1 (ВСЕ Виды Времени для конкретного ДНЯ ЗАРАНЕЕ известны)
    - Функция `ДанныеОВремени`
        - получаем пустую Таблицу для Регистрации Времени
         - Цикл по строкам ТЧ Документа: 
              - Заполняем Значения Колонок
         - **отдельно  для КАЖДОГО  Вида Времени (Лаборатория | Явка)** 
    - Возвращаем заполненую таблицу  
 
- [Реализация](https://github.com/alex-dev-2020/HRM_3_1_23/commit/4c7517a6dec1a1e81663f2caefdaa5855224c050) для варианта № 2 (Виды Времени ВНУТРИ дня ЗАРАНЕЕ неизвестны)
     - Необходимо получить Данные:
        - для Вида Времени  `Работа в Лаборатории` из ТЧ Документа  
        - для Вида Времени  `Явка` из ВТ `ВТВремя`
            - [текст Запроса ](https://github.com/alex-dev-2020/HRM_3_1_23/commit/c508cc72f186f2cbfcd70394933c2bf78d419716) - `*.sdbl`   
